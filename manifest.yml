# Cloud Foundry Deployment Manifest
applications:
  - name: web-search-mcp
    memory: 1G
    instances: 1
    path: target/web-search-mcp-1.0.0-SNAPSHOT.jar
    buildpacks:
      - java_buildpack_offline
    env:
      JBP_CONFIG_OPEN_JDK_JRE: '{ jre: { version: 21.+ } }'
      SPRING_PROFILES_ACTIVE: cloud
      # Web search API key (required)
      WEBSEARCH_API_KEY: ((websearch-api-key))
      # WEBSEARCH_PROVIDER: BRAVE  # or SERPAPI, GOOGLE_CUSTOM_SEARCH
    health-check-type: http
    health-check-http-endpoint: /actuator/health/liveness
    routes:
      - route: web-search-mcp.apps.internal
    services:
      # Bind to your SSO service instance
      # The app auto-detects these service types: p-identity, sso, uaa, xsuaa
      - sso  # Change to your SSO service instance name
